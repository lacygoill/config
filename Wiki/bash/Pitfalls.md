# I'm trying to run a command whose arguments are generated by the output of another command.  Sometimes it fails!

A command substitution should be used only  to generate data, not code (i.e. not
command names or argument): <https://mywiki.wooledge.org/BashFAQ/050>

---

The shell has a maximum command length which is imposed by the operating system:

    $ xargs --show-limits --no-run-if-empty </dev/null 2>&1 | grep 'command buffer'
    Size of command buffer we are actually using: 131072
                                                  ^----^

If the expansion of  `$(CMD2)` is too big, it might  produce a command exceeding
that limit.

Use `xargs(1)`:

    $ CMD2 | xargs CMD1

The latter builds up the `CMD1`  command-line, reading `CMD2`'s output, until it
reaches that limit.   And it will run  `CMD1` as many times as  necessary to use
the whole output of `CMD2`.

---

    ✔
    $ tmux set @foo 'if -F 1 "display"' ; \
      tmux $(tmux show -v @foo)

    ✘
    $ tmux set @foo 'if -F 1 "display test"' ; \
      tmux $(tmux show -v @foo)
      syntax error˜

This is because:

   1. quoting is performed before command substitution, so when it occurs,
      `$(tmux show -v @foo)` has not been expanded yet, and the quotes around
      `"display test"` can't be interpreted as syntactical, because they don't
      exist yet

   2. an unquoted command substitution is followed by word splitting

   3. when the word splitting occurs, the quotes around `"display test"` are
      parsed as literal (quoting is done, it's too late for them to be parsed
      as syntactical); so the shell splits `"display test"` into `"display` and `test"`

You can check how the command is split using our `args` script:

    $ args $(tmux show -v @foo)
    5 args: <if> <-F> <1> <"display> <test">

    $ args if -F 1 "display test"
    4 args: <if> <-F> <1> <display test>

Using `eval` could work:

    $ tmux set @foo 'if -F 1 "display test"' ; \
      eval "tmux $(tmux show -v @foo)"

but sometimes, it might also give [unexpected results][1], IDK.

Here, a better approach is to simply save the output of `$ tmux show -v @foo` in
a file, and make tmux source it.

More generally,  depending on what  you're trying to achieve,  several solutions
exist: <https://mywiki.wooledge.org/BashFAQ/050>
